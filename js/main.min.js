function mainPreloader(){var o=this;o.preloaderTemplate="content/preloader.html",o.preloaderImage="gfx/preloader_bg.jpg",o.animate=function(o){$(options.selector.loadingText).fadeIn(function(){$(options.selector.loadingParenthesis[0]).css({display:"block",opacity:0}).animate({right:"0px",opacity:1},200),$(options.selector.loadingParenthesis[1]).css({display:"block",opacity:0}).animate({left:"0px",opacity:1},200),setTimeout(function(){var t=[$(options.selector.loadingMusic[0]),$(options.selector.loadingImage[0]),$(options.selector.loadingSections[0])];$.each(t,function(o,t){setTimeout(function(){t.toggle("pulsate")},200*o)}),o instanceof Function&&setTimeout(function(){o()},500)},500)})},o.unload=function(o){$(options.selector.loadingList).fadeOut(500,function(){$(options.selector.loadingParenthesis[0]).animate({right:"121px",opacity:0},100),$(options.selector.loadingParenthesis[1]).animate({left:"121px",opacity:0},100),$(options.selector.preloader).fadeOut(200,function(){o instanceof Function&&o()})})},o.load=function(){preloadPictures(o.preloaderImage,function(){$(options.selector.bodyWrapper).css({background:"url('"+o.preloaderImage+"')",display:"none","background-repeat":"no-repeat","background-attachment":"fixed","background-position":"center"}).fadeIn(function(){$(this).twinkleStars({timespan:1,blinkSpeed:.5,density:10,moveFactor:15}),getTemplate("preloader",function(t){$(options.selector.body).html(t),o.animate(function(){myPortfolio.load(),o.checkIfLoadedAll(function(){setTimeout(function(){o.unload(function(){myPortfolio.start()})},500)})})})})})},o.checkIfLoaded=function(o,t){var n=setInterval(function(){var e=options.isLoaded[o];e===!0&&(clearInterval(n),t instanceof Function&&t())},50)},o.checkIfLoadedAll=function(t){var n=options.selector.loadingMusic,e=options.selector.loadingImage,i=options.selector.loadingSections,a=function(o){$(o).effect("pulsate",{times:15},1e4,function(){s($(this))})},s=function(){console.log("not loaded")},c=function(o){$(o).stop(!0,!1).css({opacity:"1"})};a(n[0]),o.checkIfLoaded("music",function(){c(n[0]),$(n[1]).css({display:"inline-block"}),a(e[0]),o.checkIfLoaded("image",function(){c(e[0]),$(e[1]).css({display:"inline-block"}),a(i[0]),o.checkIfLoaded("sections",function(){c(i[0]),$(i[1]).css({display:"inline-block"}),t instanceof Function&&t()})})})}}var options={settings:{bg:"hiRes",language:"en"},selector:{bodyWrapper:"#bodyWrapper",body:"#bodyContainer",preloader:"#mainPreloader",loadingList:"#mainPreloader_rightContainer_loadList",loadingText:"#mainPreloader_leftContainer_loadingText",loadingMusic:["#loadList_music span.loadList_description","#loadList_music span.loadList_tick"],loadingImage:["#loadList_image span.loadList_description","#loadList_image span.loadList_tick"],loadingSections:["#loadList_sections span.loadList_description","#loadList_sections span.loadList_tick"],loadingParenthesis:["#mainPreloader_rightContainer_rightParenthesis","#mainPreloader_rightContainer_leftParenthesis"],mainNav:["#mainNav","#mainNav a"],secondNav:["#topMenu","#topMenu a"],mainLogo:"#logo",cp:["#leftParallelogram","#rightParallelogram"],topControls:["#topControls",".topControl",".topControls_select",".topControls_select span",".topControl_status"],topBar:["#topBar"],wrapperContainer:"#wrapperContainer",header:"#header"},toLoad:{images:["gfx/space_bg.png","gfx/space_bg.jpg","gfx/logo.png"],html:[{url:"content/portfolio.html",title:"portfolio",callback:function(o){options.loaded.portfolio=o}},{url:"server/server.php/bio",title:"bioData",callback:function(o){options.loaded.data.bio=o}},{url:"server/server.php/blog",title:"blogData",callback:function(o){options.loaded.data.blog=o}},{url:"server/server.php/work",title:"workData",callback:function(o){options.loaded.data.work=o}},{url:"server/server.php/contact",title:"contactData",callback:function(o){options.loaded.data.cotact=o}},{url:"server/server.php/scripts",title:"scriptsData",callback:function(o){options.loaded.data.scripts=o}}],sounds:[{url:"music/Kai Engel - Extinguished.mp3"}]},loaded:{data:{}},isLoaded:{music:!1,image:!1,sections:!1},background:{hiRes:"gfx/space_bg.png",lowRes:"gfx/space_bg.jpg",width:0,height:0}},portfolio=function(){var o=this;o.active="",o.recent="",o.current=0,o.settings={bgLocation:{home:-5659,blog:-2500,bio:-4500,work:-1500,contact:0,scripts:-3500},polys:{cp1:[0,0,200,0,275,80,0,80],cp2:[0,0,360,0,360,80,75,80]}},o.topControls={actions:{music:{on:function(){o.sound.play()},off:function(){o.sound.pause()}},language:{current:options.settings.language,setDefault:function(){$(options.selector.body).find(".lang[lang='"+options.settings.language+"']").show()},changeTo:function(o){o!==this.current&&($(options.selector.body).find(".lang[lang='"+this.current+"']").hide(),$(options.selector.body).find(".lang[lang='"+o+"']").show(),this.current=o)},en:function(){this.changeTo("en")},de:function(){this.changeTo("de")},pl:function(){this.changeTo("pl")}}},open:function(o){var t=$(o.currentTarget),n=t.data("options").split(","),e=t.data("current"),i=[];$.each(n,function(o,t){var n="";-1!==t.indexOf(".")&&(t=t.split("."),n="data-class='"+t[1]+"'",t=t[0]),t!=e&&i.push("<span "+n+" data-option='"+t+"'>"+t+"</span>")}),i=i.join("");var a=t.find(options.selector.topControls[2]);a.html(i),a.stop().css({display:"block",opacity:0}).animate({top:"0px",opacity:1},200)},close:function(o){var t=$(o.currentTarget),n=t.find(options.selector.topControls[2]);n.stop().animate({top:"-33px",opacity:0},function(){n.css({display:"none"}),n.html("")})},change:function(t){var n=$(t.target),e=n.data("option"),i=n.closest(options.selector.topControls[1]),a=i.find(options.selector.topControls[4]),s=i.attr("id").split("_")[1];console.log(s),o.topControls.actions[s][e]instanceof Function&&o.topControls.actions[s][e](),i.data("current",e),a.html(e),"undefined"!=typeof n.data("class")&&a.removeClass(function(o,t){return(t.match(/(^|\s)color-\S+/g)||[]).join(" ")}).addClass("color-"+n.data("class")),i.trigger("mouseleave")},set:function(){$(options.selector.topControls[0]).on("mouseenter",options.selector.topControls[1],o.topControls.open),$(options.selector.topControls[0]).on("mouseleave",options.selector.topControls[1],o.topControls.close),$(options.selector.topControls[0]).on("click",options.selector.topControls[3],o.topControls.change)}},o.openAnimation={home:function(){$("#_home").css({display:"table"}),drawPoly(options.selector.cp[0],o.settings.polys.cp1,"#000",[300,80]),drawPoly(options.selector.cp[1],o.settings.polys.cp2,"#fff",[360,80]),setTimeout(function(){$.each($(options.selector.mainNav[1]),function(o,t){setTimeout(function(){$(t).effect("pulsate",200).animate({opacity:1},200)},100*o)}),$(options.selector.mainLogo).animate({opacity:1},2e3)},1e3)},bio:function(){},blog:function(o){$("#_blog").css({display:"block",opacity:0}).animate({opacity:1},function(){o instanceof Function&&o()})},work:function(){},contact:function(){},scripts:function(){$("#_scripts").css({display:"block",opacity:1,height:600}).hexList(options.loaded.data.scripts.result,{cols:6,animate:!0,animation:{duration:400,type:"shoot",offset:200}})}},o.closeAnimation={home:function(o){$("#_home").fadeOut(function(){$(options.selector.topBar[0]).css({display:"block",opacity:0}).animate({opacity:1,top:"0px"},function(){o()})})},bio:function(o){o instanceof Function&&o()},blog:function(o){$("#_blog").animate({opacity:0},function(){$(this).css({display:"none"}),o()})},work:function(o){o instanceof Function&&o()},contact:function(o){o instanceof Function&&o()},scripts:function(o){$("#_scripts").animate({opacity:0},function(){$(this).css({display:"none"}).html(""),o instanceof Function&&o()})}},o.menu={set:function(){var t=[options.selector.mainNav[1],options.selector.secondNav[1]].join(",");$(options.selector.body).on("click",t,function(){var t=$(this).attr("href").split("#")[1];o.setPage(t,!0,!0)})}},o.sound={sound:{},start:function(){return o.sound.sound=new Audio("music/Kai Engel - Extinguished.mp3"),o.sound.sound.volume=.1,o.sound.sound.loop=!0,this},play:function(){return o.sound.sound.play(),this},pause:function(){return o.sound.sound.pause(),this}},o.content={setWrapperSize:function(){var o=$(options.selector.wrapperContainer),t=$(options.selector.header).height(),n=$(window).height(),e=parseInt(n)-parseInt(t);o.css({height:e+"px","margin-top":t+"px"})}},o.background={getX:function(){return centerImage(options.background.width,$(window).width())},getY:function(t){return t===!1&&(t=o.active),o.settings.bgLocation[t]},setPosition:function(t,n,e){var i=o.background.getX(),a=o.background.getY(t),s=-i+"px "+a+"px";n===!1?($(options.selector.bodyWrapper).css({"background-position":s}),e instanceof Function&&e()):n===!0&&$(options.selector.bodyWrapper).stop(!0,!1).animate({backgroundPosition:s},{queue:!1,duration:1e3,easing:"smoothmove",complete:function(){e instanceof Function&&e()}})},setBackground:function(o){$(options.selector.bodyWrapper).css({background:"url('"+o+"')"})},moveBg:function(t){var n=25,e=t.pageX,i=t.pageY,a=(e-$(window).width()/2)/n*-1,s=(i-$(window).height()/2)/n*-1,c=($(options.selector.bodyWrapper).css("background-position").split(" "),-parseInt(o.background.getX())+parseInt(a)+"px "+(parseInt(o.background.getY(!1))+parseInt(s))+"px");$(options.selector.bodyWrapper).animate({backgroundPosition:c},{queue:!1,duration:1e3,easing:"smoothmove"})}},o.setPage=function(t,n,e){o.active!==t&&(""!==o.active&&(o.recent=o.active),o.active=t,o.closeRecent(e,function(){$(options.selector.bodyWrapper).off("mousemove",o.background.moveBg),o.background.setPosition(t,n,function(){o.openAnimation[t]instanceof Function&&($(options.selector.bodyWrapper).on("mousemove",o.background.moveBg),o.openAnimation[t]())})}))},o.ajaxRecursive=function(t,n){o.current<t.length&&$.ajax({type:"GET",url:t[o.current].url,error:function(){}}).done(function(e){t[o.current].callback instanceof Function&&t[o.current].callback(e),parseInt(o.current)==parseInt(t.length-1)?n instanceof Function&&n():(o.current++,o.ajaxRecursive(t,n))})},o.load=function(){o.ajaxRecursive(options.toLoad.sounds,function(){o.current=0,options.isLoaded.music=!0,preloadPictures(options.toLoad.images,function(t,n){var e=t.src,i=e.split("/").pop();options.background[options.settings.bg]==="gfx/"+i&&(options.background.width=t.width,options.background.height=t.height),n===!0&&(options.isLoaded.image=!0,o.ajaxRecursive(options.toLoad.html,function(){options.isLoaded.sections=!0}))})})},o.closeRecent=function(t,n){t===!1?n instanceof Function&&n():o.closeAnimation[o.recent]instanceof Function&&o.closeAnimation[o.recent](n)},o.renderTemplates=function(){0!==options.loaded.data.length&&$.each(options.loaded.data,function(){var o=this;if(o.error!==!0||"undefined"==typeof o.error){var t=o.result,n=o.resource,e=$("#"+n+"Template"),i=$("#_"+n),a=e.render(t);i.html(a)}})},o.scrollBar={set:function(){$(options.selector.wrapperContainer).mCustomScrollbar({theme:"light-thin",autoHideScrollbar:!0})}},o.start=function(){$(options.selector.body).html(options.loaded.portfolio),o.content.setWrapperSize(),o.renderTemplates(),o.topControls.actions.language.setDefault(),o.background.setBackground(options.background[options.settings.bg]),o.setPage("home",!1,!1),o.sound.start(),o.topControls.set(),o.menu.set(),o.scrollBar.set()}},preloadPictures=function(o,t){o instanceof Array||(o=[o]);var n,e,i=0;for(n=0,e=o.length;e>n;n++)!function(n,e){n.onload=function(){++i==o.length&&t?t(this,!0):t(this,!1)},n.onerror=function(){},n.onabort=function(){},n.src=e}(new Image,o[n])},getTemplate=function(o,t){var n="content/"+o+".html";$.ajax({type:"GET",url:n,error:function(){}}).done(function(o){t(o)})},preloader=new mainPreloader,myPortfolio=new portfolio;$(function(){preloader.load(),$(window).resize(function(){myPortfolio.background.setPosition(!1,!1),myPortfolio.content.setWrapperSize()})});